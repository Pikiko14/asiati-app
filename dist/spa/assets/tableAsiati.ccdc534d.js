import{e as B,Q as I}from"./headers.e2e63168.js";import{o as N,e as E,G as b,I as v,K as T,Y as D,ab as R,r as _,Z as A,B as V,a7 as M,_ as O,$ as c,aC as z,a2 as o,a1 as t,a9 as H,a6 as L,ar as W,aa as j,a4 as m,a0 as p,a5 as f}from"./index.2f0c4fae.js";import{e as F,f as G,d as g,Q as w,a as h}from"./modalCard.e7fdc3b5.js";import{a as K}from"./QTable.93a07d92.js";import{u as U}from"./use-quasar.13bf5623.js";var k=N({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:r}){const i=T(),n=E(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return b("td",{class:n.value},v(r.default));const u=i.vnode.key,s=(e.props.colsMap!==void 0?e.props.colsMap[u]:null)||e.props.col;if(s===void 0)return;const{row:a}=e.props;return b("td",{class:n.value+s.__tdClass(a),style:s.__tdStyle(a)},v(r.default))}}});const Y=D({name:"TableAsiati",emits:["do-delete","do-edit","do-show"],props:{rows:{type:Array,required:!0,default:()=>[]},columns:{type:Array,required:!0,default:()=>[]},totalItems:Number,permissionEdit:{type:String,default:()=>""},permissionDelete:{type:String,default:()=>""},permissionShow:{type:String,default:()=>""}},setup(e,{emit:r}){const i=U(),n=R(),u=_({admin:"Administrador",ceo:"CEO"}),s=_({page:1,rowsPerPage:12,rowsNumber:1}),a=A();V(()=>e.totalItems,()=>{s.value.rowsNumber=e.totalItems});const d=l=>{i.dialog({title:"Eliminar",message:"\xBFDeseas eliminar este elemento?",cancel:!0,persistent:!0}).onOk(()=>{r("do-delete",l)}).onCancel(()=>{})},q=l=>{const{pagination:y}=l,P=y.page||1,$=y.rowsPerPage||12,S=n.query.search||"";a.push({query:{page:P,perPage:$,search:S}})},C=l=>{r("do-edit",l)},Q=l=>{r("do-show",l)};return M(()=>{n.query.page&&(s.value.page=Number(n.query.page)),n.query.perPage&&(s.value.rowsPerPage=Number(n.query.perPage)),e.totalItems&&(s.value.rowsNumber=e.totalItems)}),{roles:u,doEdit:C,doShow:Q,doDolete:d,onRequest:q,pagination:s}}}),Z={class:"full-width q-mt-lg"},J={class:"full-width text-center q-pt-md"};function X(e,r,i,n,u,s){return c(),z("section",Z,[o(K,{onRequest:e.onRequest,"rows-per-page-options":[1,5,12,20,50],pagination:e.pagination,"onUpdate:pagination":r[0]||(r[0]=a=>e.pagination=a),"row-key":"_id",class:"shadow-0 round-10",columns:e.rows,rows:e.columns},{"body-cell-userType":t(a=>[o(k,null,{default:t(()=>[o(B,{class:H([{"admin-chip":a.row.role==="admin","ceo-chip":a.row.role==="ceo"},"text-white"]),color:"secondary",size:"8pt"},{default:t(()=>[L("p",J,W(e.roles[a.row.role]),1)]),_:2},1032,["class"])]),_:2},1024)]),"body-cell-option":t(a=>[o(k,null,{default:t(()=>[o(j,{size:"8pt",flat:"",round:"",icon:"img:/images/options.svg"},{default:t(()=>[o(F,{class:"bg-primary"},{default:t(()=>[m(" Opciones ")]),_:1}),o(I,{class:"round-10"},{default:t(()=>[o(G,{dense:""},{default:t(()=>[e.$hasPermission(e.permissionShow)?(c(),p(h,{key:0,clickable:"",onClick:d=>e.doShow(a.row)},{default:t(()=>[o(g,null,{default:t(()=>[o(w,{class:"text-primary text-weight-semi-bold"},{default:t(()=>[m(" Ver ")]),_:1})]),_:1})]),_:2},1032,["onClick"])):f("",!0),e.$hasPermission(e.permissionEdit)?(c(),p(h,{key:1,clickable:"",onClick:d=>e.doEdit(a.row._id)},{default:t(()=>[o(g,null,{default:t(()=>[o(w,{class:"text-primary text-weight-semi-bold"},{default:t(()=>[m(" Editar ")]),_:1})]),_:1})]),_:2},1032,["onClick"])):f("",!0),e.$hasPermission(e.permissionDelete)?(c(),p(h,{key:2,clickable:"",onClick:d=>e.doDolete(a.row._id)},{default:t(()=>[o(g,null,{default:t(()=>[o(w,{class:"text-primary text-weight-semi-bold"},{default:t(()=>[m(" Eliminar ")]),_:1})]),_:1})]),_:2},1032,["onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["onRequest","pagination","columns","rows"])])}var se=O(Y,[["render",X]]);export{se as T};
