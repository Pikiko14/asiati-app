import{Q,a as J}from"./QForm.879d6e2d.js";import{e as $,o as X,r as d,w as T,T as ee,C as oe,G as y,ab as ae,I as te,ac as ne,B as se,ad as L,K as re,Y as z,Z as x,_ as P,$ as f,ae as p,af as u,a2 as s,a1 as g,ag as b,a4 as D,ah as _,a3 as ie,ai as le,aj as ue,a5 as R,ak as de,al as ce,am as me,an as Z,a0 as ge}from"./index.7eb49f3c.js";import{u as E}from"./auth.0e6d32e8.js";import{notification as N}from"./notification.9c1df94d.js";const fe={ratio:[String,Number]};function ve(e,o){return $(()=>{const r=Number(e.ratio||(o!==void 0?o.value:void 0));return isNaN(r)!==!0&&r>0?{paddingBottom:`${100/r}%`}:null})}const he=1.7778;var ye=X({name:"QImg",props:{...fe,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:he},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:o,emit:r}){const m=d(e.initialRatio),c=ve(e,m),l=re(),{registerTimeout:a,removeTimeout:n}=T(),{registerTimeout:w,removeTimeout:q}=T(),k=$(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),i=$(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),v=[d(null),d(k.value)],h=d(0),C=d(!1),F=d(!1),M=$(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),j=$(()=>({width:e.width,height:e.height})),U=$(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),O=$(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function H(){if(q(),e.loadingShowDelay===0){C.value=!0;return}w(()=>{C.value=!0},e.loadingShowDelay)}function I(){q(),C.value=!1}function G({target:t}){L(l)===!1&&(n(),m.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,A(t,1))}function A(t,S){S===1e3||L(l)===!0||(t.complete===!0?K(t):a(()=>{A(t,S+1)},50))}function K(t){L(l)!==!0&&(h.value=h.value^1,v[h.value].value=null,I(),t.getAttribute("__qerror")!=="true"&&(F.value=!1),r("load",t.currentSrc||t.src))}function W(t){n(),I(),F.value=!0,v[h.value].value=i.value,v[h.value^1].value=k.value,r("error",t)}function B(t){const S=v[t].value,V={key:"img_"+t,class:U.value,style:O.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...S};return h.value===t?Object.assign(V,{class:V.class+"current",onLoad:G,onError:W}):V.class+="loaded",y("div",{class:"q-img__container absolute-full",key:"img"+t},y("img",V))}function Y(){return C.value===!1?y("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},te(o[F.value===!0?"error":"default"])):y("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},o.loading!==void 0?o.loading():e.noSpinner===!0?void 0:[y(ne,{color:e.spinnerColor,size:e.spinnerSize})])}{let t=function(){se(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,S=>{n(),F.value=!1,S===null?(I(),v[h.value^1].value=k.value):H(),v[h.value].value=S},{immediate:!0})};ee.value===!0?oe(t):t()}return()=>{const t=[];return c.value!==null&&t.push(y("div",{key:"filler",style:c.value})),v[0].value!==null&&t.push(B(0)),v[1].value!==null&&t.push(B(1)),t.push(y(ae,{name:"q-transition--fade"},Y)),y("div",{key:"main",class:M.value,style:j.value,role:"img","aria-label":e.alt},t)}}});const pe=z({name:"RecoveryForm",props:{token:{type:String,required:!1,default:()=>""}},emits:["close-modal"],setup(e,{emit:o}){const r=d({password:"",token:e.token,confirmation_password:""}),m=x(),c=d(""),l=E(),a=d(!1),n=d(!1),w=()=>{o("close-modal")},q=async()=>{if(a.value=!0,e.token)return await k(),!1;try{const i=await l.initRecoveryPassword({email:c.value});i!=null&&i.success&&(N("positice",i==null?void 0:i.message,"primary"),w())}catch{}finally{a.value=!1}},k=async()=>{try{const i=await l.doChangePassword(r.value);i!=null&&i.success&&(N("positice",i==null?void 0:i.message,"primary"),w(),m.push({name:"login"}))}catch{}finally{a.value=!1}};return{email:c,loading:a,onSubmit:q,closeModal:w,recoveryData:r,showPassword:n}}}),we={class:"row d-flex align-center justify-center"},Se={class:"col-12 text-center text-h5 text-weight-semi-bold"},$e={key:0},_e={key:1},ke={class:"col-12 q-mt-lg"},be={key:0,class:"col-12"},qe={key:1,class:"col-12"},Ce={key:2,class:"col-12"},Fe={class:"col-12 q-mt-sm"},Ve={class:"col-12 q-mt-lg"},ze=u("span",{class:"q-pl-sm text-accent"},"Regresar a Iniciar sesi\xF3n",-1);function Pe(e,o,r,m,c,l){return f(),p("div",we,[u("div",Se,[e.token?(f(),p("span",_e,"Ingresa tu nueva contrase\xF1a")):(f(),p("span",$e," \xBFOlvidaste tu contrase\xF1a? "))]),u("div",ke,[s(Q,{class:"row full-width",onSubmit:e.onSubmit},{default:g(()=>[e.token?D("",!0):(f(),p("div",be,[s(b,{modelValue:e.email,"onUpdate:modelValue":o[0]||(o[0]=a=>e.email=a),placeholder:"Ingresa tu correo electr\xF3nico",outlined:"",rounded:"",rules:[a=>!!a||"Este campo es requerido",a=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a)||"Ingresa un correo electr\xF3nico valido"]},null,8,["modelValue","rules"])])),e.token?(f(),p("div",qe,[s(b,{type:e.showPassword?"text":"password",modelValue:e.recoveryData.password,"onUpdate:modelValue":o[2]||(o[2]=a=>e.recoveryData.password=a),placeholder:"**********",outlined:"",rounded:"",rules:[a=>!!a||"Este campo es requerido",a=>/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[$@#&!*-])[A-Za-z\d$@#&!*-]{8,}$/.test(a)||"Ingresa una contrase\xF1a valida"]},{append:g(()=>[s(_,{onClick:o[1]||(o[1]=a=>e.showPassword=!e.showPassword),flat:"",dense:"",rounded:"",icon:"img:images/eye.svg"})]),_:1},8,["type","modelValue","rules"])])):D("",!0),e.token?(f(),p("div",Ce,[s(b,{type:e.showPassword?"text":"password",modelValue:e.recoveryData.confirmation_password,"onUpdate:modelValue":o[4]||(o[4]=a=>e.recoveryData.confirmation_password=a),placeholder:"**********",outlined:"",rounded:"",rules:[a=>!!a||"Este campo es requerido",a=>/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[$@#&!*-])[A-Za-z\d$@#&!*-]{8,}$/.test(a)||"Ingresa una contrase\xF1a valida"]},{append:g(()=>[s(_,{onClick:o[3]||(o[3]=a=>e.showPassword=!e.showPassword),flat:"",dense:"",rounded:"",icon:"img:images/eye.svg"})]),_:1},8,["type","modelValue","rules"])])):D("",!0),u("div",Fe,[s(_,{loading:e.loading,rounded:"",size:"12pt",label:"Recuperar contrase\xF1a","no-caps":"",unelevated:"",color:"primary",class:"full-width",type:"submit"},null,8,["loading"])]),u("div",Ve,[s(_,{onClick:e.closeModal,flat:"",rounded:"",size:"12pt","no-caps":"",unelevated:"",color:"trasnparent",class:"full-width"},{default:g(()=>[s(ie,{style:{"margin-top":"-4px"},size:"15pt",class:"float-left",name:"img:/images/back.svg"}),ze]),_:1},8,["onClick"])])]),_:1},8,["onSubmit"])])])}var Ie=P(pe,[["render",Pe]]);const Le=z({name:"LoginFormView",emits:["do-login"],props:{loading:Boolean},components:{RecoveryFormVue:Ie},setup(e,{emit:o}){const r=le(),m=x(),c=d(""),l=d(!1),a=d({username:null,password:null}),n=d(!1),w=()=>{o("do-login",a.value)};return ue(()=>{r.path==="/recovery"&&(r.query.token||m.push({name:"login"}),r.query.token&&(n.value=!0,c.value=r.query.token))}),{token:c,onSubmit:w,loginData:a,showPassword:l,recoveryPassword:n}}}),De={class:"full-width full-height d-flex flex-center items-center"},xe={class:"col-12 text-center"},Re=u("div",{class:"col-12 q-mt-xl text-h4 text-weight-semi-bold text-center"},[Z(" M\xF3dulo Financiero "),u("br"),Z(" eCommerce ")],-1),Ae={class:"col-12 q-mt-xl"},Be=u("label",{for:""},"Correo electr\xF3nico",-1),Te={class:"col-12"},Ze=u("label",{for:""},"Contrase\xF1a",-1),Ne={class:"col-12 text-right"},Qe={class:"col-12 q-mt-xl"};function Ee(e,o,r,m,c,l){const a=R("RecoveryFormVue");return f(),p("section",De,[s(Q,{onSubmit:e.onSubmit,class:"row q-px-xl"},{default:g(()=>[u("div",xe,[s(ye,{src:"/images/logo.svg",width:"200px"})]),Re,u("div",Ae,[Be,s(b,{modelValue:e.loginData.username,"onUpdate:modelValue":o[0]||(o[0]=n=>e.loginData.username=n),placeholder:"Ingresa tu correo electr\xF3nico",outlined:"",rounded:"",rules:[n=>!!n||"Este campo es requerido",n=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(n)||"Ingresa un correo electr\xF3nico valido"]},null,8,["modelValue","rules"])]),u("div",Te,[Ze,s(b,{type:e.showPassword?"text":"password",modelValue:e.loginData.password,"onUpdate:modelValue":o[2]||(o[2]=n=>e.loginData.password=n),placeholder:"**********",outlined:"",rounded:"",rules:[n=>!!n||"Este campo es requerido",n=>/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[$@#&!*-])[A-Za-z\d$@#&!*-]{8,}$/.test(n)||"Ingresa una contrase\xF1a valida"]},{append:g(()=>[s(_,{onClick:o[1]||(o[1]=n=>e.showPassword=!e.showPassword),flat:"",dense:"",rounded:"",icon:"img:images/eye.svg"})]),_:1},8,["type","modelValue","rules"])]),u("div",Ne,[u("span",{onClick:o[3]||(o[3]=n=>e.recoveryPassword=!0),class:"text-primary text-weight-medium font-12 cursor-pointer"},"Olvide mi contrase\xF1a")]),u("div",Qe,[s(_,{rounded:"",size:"12pt",label:"Iniciar sesi\xF3n","no-caps":"",unelevated:"",color:"primary",class:"full-width",type:"submit"})])]),_:1},8,["onSubmit"]),s(me,{modelValue:e.recoveryPassword,"onUpdate:modelValue":o[5]||(o[5]=n=>e.recoveryPassword=n)},{default:g(()=>[s(de,{class:"round-10 recovery-card q-pa-lg"},{default:g(()=>[s(ce,null,{default:g(()=>[s(a,{token:e.token,onCloseModal:o[4]||(o[4]=n=>e.recoveryPassword=!1)},null,8,["token"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var Me=P(Le,[["render",Ee]]);const je=z({name:"LoginComponent",components:{LoginForm:Me},setup(){const e=x(),o=E(),r=d(!1);return{doLogin:async c=>{try{const l=await o.doLogin(c);l&&l.success&&e.push({name:"dashboard"})}catch{}},loading:r}}}),Ue={class:"login-form row background"},Oe={class:"col-12 col-md-4 mobile-overflow"};function He(e,o,r,m,c,l){const a=R("LoginForm");return f(),p("section",Ue,[u("div",Oe,[s(a,{loading:e.loading,onDoLogin:e.doLogin,key:"login-form"},null,8,["loading","onDoLogin"])])])}var Ge=P(je,[["render",He]]);const Ke=z({name:"IndexPage",components:{Login:Ge},setup(){return{}}});function We(e,o,r,m,c,l){const a=R("Login");return f(),ge(J,{class:"login-page"},{default:g(()=>[s(a)]),_:1})}var oo=P(Ke,[["render",We]]);export{oo as default};
