import{d as xt,r as E,o as G,e as f,G as u,I as oe,K,aa as Tt,a3 as ze,B as D,aj as qe,C as Ge,ap as Bt,ao as $t,E as Ke,P as Ot,Q as De,X as We,q as Xe,aH as Ft,v as Ye,aI as Dt,b9 as Et,ba as Ee,bb as _e,i as Le,aw as Lt,D as Ze,bc as Vt,bd as Se,ay as Q,ah as z,be as Nt,x as Mt,bf as jt,Y as At,ai as Qt,Z as It,_ as Ut,$ as he,ae as Ht,a2 as O,a1 as p,az as zt,af as Gt,aC as Kt,an as we,a0 as Ve,a4 as Ne}from"./index.e94012db.js";import{R as Wt}from"./auth.4c1cf49a.js";import{e as Xt,f as Yt,d as Zt,g as Je,c as Jt,h as el,i as tl,Q as ll}from"./QMarkupTable.c50713a9.js";import{e as et,d as Me,Q as je,a as Ae}from"./QList.f494f610.js";const I="users",U=new Wt({Accept:"application/json"}),Ml=xt("usersStore",()=>{const e=E([]),a=E(0);return{users:e,doSaveUser:async n=>{try{const o=await U.doPostRequest(`${I}`,n,!0,!1);if(o.success)return e.value.push(o.data),a.value++,o}catch{}},totalItems:a,doListUsers:async n=>{try{const o=await U.doGetRequest(`${I}`,n,!0);if(o.success)return e.value=o.data.users,a.value=o.data.totalItems,o}catch{}},doUpdateUser:async n=>{try{const o=await U.doPutRequest(`${I}/${n._id}`,n,!0,!1);if(o.success){const g=e.value.findIndex(l=>l._id===n._id);return g!==-1&&(e.value[g]=o.data),o}}catch{}},doDeleteUser:async n=>{try{const o=await U.doDeleteRequest(`${I}/${n}`,!0);if(o.success){const g=e.value.findIndex(l=>l._id===n);return g!==-1&&(e.value.splice(g,1),a.value--),o}}catch{}},listForSelect:async()=>{try{const n=await U.doGetRequest(`${I}/for-select`,"",!0);if(n.success)return e.value=n.data,n}catch{}}}});var Qe=G({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:a}){const s=K(),d=f(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return u("td",{class:d.value},oe(a.default));const i=s.vnode.key,v=(e.props.colsMap!==void 0?e.props.colsMap[i]:null)||e.props.col;if(v===void 0)return;const{row:r}=e.props;return u("td",{class:d.value+v.__tdClass(r),style:v.__tdStyle(r)},oe(a.default))}}}),al=G({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:a,emit:s}){const d=K(),{proxy:{$q:i}}=d,v=r=>{s("click",r)};return()=>{if(e.props===void 0)return u("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:v},oe(a.default));let r,n;const o=d.vnode.key;if(o){if(r=e.props.colsMap[o],r===void 0)return}else r=e.props.col;if(r.sortable===!0){const l=r.align==="right"?"unshift":"push";n=Tt(a.default,[]),n[l](u(ze,{class:r.__iconClass,name:i.iconSet.table.arrowUp}))}else n=oe(a.default);const g={class:r.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:r.headerStyle,onClick:l=>{r.sortable===!0&&e.props.sort(r),v(l)}};return u("th",g,n)}}});function tt(e,a){return u("div",e,[u("table",{class:"q-table"},a)])}const nl={list:et,table:Zt},ol=["list","table","__qtable"];var rl=G({name:"QVirtualScroll",props:{...Xt,type:{type:String,default:"list",validator:e=>ol.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:a,attrs:s}){let d;const i=E(null),v=f(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:r,localResetVirtualScroll:n,padVirtualScroll:o,onVirtualScrollEvt:g}=Yt({virtualScrollLength:v,getVirtualScrollTarget:P,getVirtualScrollEl:q}),l=f(()=>{if(v.value===0)return[];const $=(F,R)=>({index:r.value.from+R,item:F});return e.itemsFn===void 0?e.items.slice(r.value.from,r.value.to).map($):e.itemsFn(r.value.from,r.value.to-r.value.from).map($)}),m=f(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),_=f(()=>e.scrollTarget!==void 0?{}:{tabindex:0});D(v,()=>{n()}),D(()=>e.scrollTarget,()=>{S(),w()});function q(){return i.value.$el||i.value}function P(){return d}function w(){d=Ot(q(),e.scrollTarget),d.addEventListener("scroll",g,De.passive)}function S(){d!==void 0&&(d.removeEventListener("scroll",g,De.passive),d=void 0)}function B(){let $=o(e.type==="list"?"div":"tbody",l.value.map(a.default));return a.before!==void 0&&($=a.before().concat($)),We(a.after,$)}return qe(()=>{n()}),Ge(()=>{w()}),Bt(()=>{w()}),$t(()=>{S()}),Ke(()=>{S()}),()=>{if(a.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?tt({ref:i,class:"q-table__middle "+m.value},B()):u(nl[e.type],{...s,ref:i,class:[s.class,m.value],..._.value},B)}}});const sl={xs:2,sm:4,md:6,lg:10,xl:14};function Ie(e,a,s){return{transform:a===!0?`translateX(${s.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var il=G({name:"QLinearProgress",props:{...Xe,...Ft,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:a}){const{proxy:s}=K(),d=Ye(e,s.$q),i=Dt(e,sl),v=f(()=>e.indeterminate===!0||e.query===!0),r=f(()=>e.reverse!==e.query),n=f(()=>({...i.value!==null?i.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),o=f(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),g=f(()=>Ie(e.buffer!==void 0?e.buffer:1,r.value,s.$q)),l=f(()=>`with${e.instantFeedback===!0?"out":""}-transition`),m=f(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${l.value} q-linear-progress__track--${d.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),_=f(()=>Ie(v.value===!0?1:e.value,r.value,s.$q)),q=f(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${l.value} q-linear-progress__model--${v.value===!0?"in":""}determinate`),P=f(()=>({width:`${e.value*100}%`})),w=f(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${l.value}`);return()=>{const S=[u("div",{class:m.value,style:g.value}),u("div",{class:q.value,style:_.value})];return e.stripe===!0&&v.value===!1&&S.push(u("div",{class:w.value,style:P.value})),u("div",{class:o.value,style:n.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},We(a.default,S))}}});let H=0;const ul={fullscreen:Boolean,noRouteFullscreenExit:Boolean},cl=["update:fullscreen","fullscreen"];function dl(){const e=K(),{props:a,emit:s,proxy:d}=e;let i,v,r;const n=E(!1);Et(e)===!0&&D(()=>d.$route.fullPath,()=>{a.noRouteFullscreenExit!==!0&&l()}),D(()=>a.fullscreen,m=>{n.value!==m&&o()}),D(n,m=>{s("update:fullscreen",m),s("fullscreen",m)});function o(){n.value===!0?l():g()}function g(){n.value!==!0&&(n.value=!0,r=d.$el.parentNode,r.replaceChild(v,d.$el),document.body.appendChild(d.$el),H++,H===1&&document.body.classList.add("q-body--fullscreen-mixin"),i={handler:l},Ee.add(i))}function l(){n.value===!0&&(i!==void 0&&(Ee.remove(i),i=void 0),r.replaceChild(d.$el,v),n.value=!1,H=Math.max(0,H-1),H===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),d.$el.scrollIntoView!==void 0&&setTimeout(()=>{d.$el.scrollIntoView()})))}return qe(()=>{v=document.createElement("span")}),Ge(()=>{a.fullscreen===!0&&g()}),Ke(l),Object.assign(d,{toggleFullscreen:o,setFullscreen:g,exitFullscreen:l}),{inFullscreen:n,toggleFullscreen:o}}function vl(e,a){return new Date(e)-new Date(a)}const fl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function gl(e,a,s,d){const i=f(()=>{const{sortBy:n}=a.value;return n&&s.value.find(o=>o.name===n)||null}),v=f(()=>e.sortMethod!==void 0?e.sortMethod:(n,o,g)=>{const l=s.value.find(q=>q.name===o);if(l===void 0||l.field===void 0)return n;const m=g===!0?-1:1,_=typeof l.field=="function"?q=>l.field(q):q=>q[l.field];return n.sort((q,P)=>{let w=_(q),S=_(P);return l.rawSort!==void 0?l.rawSort(w,S,q,P)*m:w==null?-1*m:S==null?1*m:l.sort!==void 0?l.sort(w,S,q,P)*m:_e(w)===!0&&_e(S)===!0?(w-S)*m:Le(w)===!0&&Le(S)===!0?vl(w,S)*m:typeof w=="boolean"&&typeof S=="boolean"?(w-S)*m:([w,S]=[w,S].map(B=>(B+"").toLocaleString().toLowerCase()),w<S?-1*m:w===S?0:m)})});function r(n){let o=e.columnSortOrder;if(Lt(n)===!0)n.sortOrder&&(o=n.sortOrder),n=n.name;else{const m=s.value.find(_=>_.name===n);m!==void 0&&m.sortOrder&&(o=m.sortOrder)}let{sortBy:g,descending:l}=a.value;g!==n?(g=n,l=o==="da"):e.binaryStateSort===!0?l=!l:l===!0?o==="ad"?g=null:l=!1:o==="ad"?l=!0:g=null,d({sortBy:g,descending:l,page:1})}return{columnToSort:i,computedSortMethod:v,sort:r}}const bl={filter:[String,Object],filterMethod:Function};function ml(e,a){const s=f(()=>e.filterMethod!==void 0?e.filterMethod:(d,i,v,r)=>{const n=i?i.toLowerCase():"";return d.filter(o=>v.some(g=>{const l=r(g,o)+"";return(l==="undefined"||l==="null"?"":l.toLowerCase()).indexOf(n)!==-1}))});return D(()=>e.filter,()=>{Ze(()=>{a({page:1},!0)})},{deep:!0}),{computedFilterMethod:s}}function yl(e,a){for(const s in a)if(a[s]!==e[s])return!1;return!0}function Ue(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Sl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function hl(e,a){const{props:s,emit:d}=e,i=E(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:s.rowsPerPageOptions.length!==0?s.rowsPerPageOptions[0]:5},s.pagination)),v=f(()=>{const l=s["onUpdate:pagination"]!==void 0?{...i.value,...s.pagination}:i.value;return Ue(l)}),r=f(()=>v.value.rowsNumber!==void 0);function n(l){o({pagination:l,filter:s.filter})}function o(l={}){Ze(()=>{d("request",{pagination:l.pagination||v.value,filter:l.filter||s.filter,getCellValue:a})})}function g(l,m){const _=Ue({...v.value,...l});if(yl(v.value,_)===!0){r.value===!0&&m===!0&&n(_);return}if(r.value===!0){n(_);return}s.pagination!==void 0&&s["onUpdate:pagination"]!==void 0?d("update:pagination",_):i.value=_}return{innerPagination:i,computedPagination:v,isServerSide:r,requestServerInteraction:o,setPagination:g}}function wl(e,a,s,d,i,v){const{props:r,emit:n,proxy:{$q:o}}=e,g=f(()=>d.value===!0?s.value.rowsNumber||0:v.value),l=f(()=>{const{page:R,rowsPerPage:x}=s.value;return(R-1)*x}),m=f(()=>{const{page:R,rowsPerPage:x}=s.value;return R*x}),_=f(()=>s.value.page===1),q=f(()=>s.value.rowsPerPage===0?1:Math.max(1,Math.ceil(g.value/s.value.rowsPerPage))),P=f(()=>m.value===0?!0:s.value.page>=q.value),w=f(()=>(r.rowsPerPageOptions.includes(a.value.rowsPerPage)?r.rowsPerPageOptions:[a.value.rowsPerPage].concat(r.rowsPerPageOptions)).map(x=>({label:x===0?o.lang.table.allRows:""+x,value:x})));D(q,(R,x)=>{if(R===x)return;const W=s.value.page;R&&!W?i({page:1}):R<W&&i({page:R})});function S(){i({page:1})}function B(){const{page:R}=s.value;R>1&&i({page:R-1})}function $(){const{page:R,rowsPerPage:x}=s.value;m.value>0&&R*x<g.value&&i({page:R+1})}function F(){i({page:q.value})}return r["onUpdate:pagination"]!==void 0&&n("update:pagination",{...s.value}),{firstRowIndex:l,lastRowIndex:m,isFirstPage:_,isLastPage:P,pagesNumber:q,computedRowsPerPageOptions:w,computedRowsNumber:g,firstPage:S,prevPage:B,nextPage:$,lastPage:F}}const _l={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},ql=["update:selected","selection"];function Pl(e,a,s,d){const i=f(()=>{const P={};return e.selected.map(d.value).forEach(w=>{P[w]=!0}),P}),v=f(()=>e.selection!=="none"),r=f(()=>e.selection==="single"),n=f(()=>e.selection==="multiple"),o=f(()=>s.value.length!==0&&s.value.every(P=>i.value[d.value(P)]===!0)),g=f(()=>o.value!==!0&&s.value.some(P=>i.value[d.value(P)]===!0)),l=f(()=>e.selected.length);function m(P){return i.value[P]===!0}function _(){a("update:selected",[])}function q(P,w,S,B){a("selection",{rows:w,added:S,keys:P,evt:B});const $=r.value===!0?S===!0?w:[]:S===!0?e.selected.concat(w):e.selected.filter(F=>P.includes(d.value(F))===!1);a("update:selected",$)}return{hasSelectionMode:v,singleSelection:r,multipleSelection:n,allRowsSelected:o,someRowsSelected:g,rowsSelectedNumber:l,isRowSelected:m,clearSelection:_,updateSelection:q}}function He(e){return Array.isArray(e)?e.slice():[]}const Cl={expanded:Array},kl=["update:expanded"];function Rl(e,a){const s=E(He(e.expanded));D(()=>e.expanded,r=>{s.value=He(r)});function d(r){return s.value.includes(r)}function i(r){e.expanded!==void 0?a("update:expanded",r):s.value=r}function v(r,n){const o=s.value.slice(),g=o.indexOf(r);n===!0?g===-1&&(o.push(r),i(o)):g!==-1&&(o.splice(g,1),i(o))}return{isRowExpanded:d,setExpanded:i,updateExpanded:v}}const pl={visibleColumns:Array};function xl(e,a,s){const d=f(()=>{if(e.columns!==void 0)return e.columns;const n=e.rows[0];return n!==void 0?Object.keys(n).map(o=>({name:o,label:o.toUpperCase(),field:o,align:_e(n[o])?"right":"left",sortable:!0})):[]}),i=f(()=>{const{sortBy:n,descending:o}=a.value;return(e.visibleColumns!==void 0?d.value.filter(l=>l.required===!0||e.visibleColumns.includes(l.name)===!0):d.value).map(l=>{const m=l.align||"right",_=`text-${m}`;return{...l,align:m,__iconClass:`q-table__sort-icon q-table__sort-icon--${m}`,__thClass:_+(l.headerClasses!==void 0?" "+l.headerClasses:"")+(l.sortable===!0?" sortable":"")+(l.name===n?` sorted ${o===!0?"sort-desc":""}`:""),__tdStyle:l.style!==void 0?typeof l.style!="function"?()=>l.style:l.style:()=>null,__tdClass:l.classes!==void 0?typeof l.classes!="function"?()=>_+" "+l.classes:q=>_+" "+l.classes(q):()=>_}})}),v=f(()=>{const n={};return i.value.forEach(o=>{n[o.name]=o}),n}),r=f(()=>e.tableColspan!==void 0?e.tableColspan:i.value.length+(s.value===!0?1:0));return{colList:d,computedCols:i,computedColsMap:v,computedColspan:r}}const ne="q-table__bottom row items-center",lt={};Je.forEach(e=>{lt[e]={}});var Tl=G({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...lt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Xe,...ul,...pl,...bl,...Sl,...Cl,..._l,...fl},emits:["request","virtualScroll",...cl,...kl,...ql],setup(e,{slots:a,emit:s}){const d=K(),{proxy:{$q:i}}=d,v=Ye(e,i),{inFullscreen:r,toggleFullscreen:n}=dl(),o=f(()=>typeof e.rowKey=="function"?e.rowKey:t=>t[e.rowKey]),g=E(null),l=E(null),m=f(()=>e.grid!==!0&&e.virtualScroll===!0),_=f(()=>" q-table__card"+(v.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),q=f(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":_.value)+(v.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(r.value===!0?" fullscreen scroll":"")),P=f(()=>q.value+(e.loading===!0?" q-table--loading":""));D(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+q.value,()=>{m.value===!0&&l.value!==null&&l.value.reset()});const{innerPagination:w,computedPagination:S,isServerSide:B,requestServerInteraction:$,setPagination:F}=hl(d,j),{computedFilterMethod:R}=ml(e,F),{isRowExpanded:x,setExpanded:W,updateExpanded:at}=Rl(e,s),re=f(()=>{let t=e.rows;if(B.value===!0||t.length===0)return t;const{sortBy:c,descending:b}=S.value;return e.filter&&(t=R.value(t,e.filter,L.value,j)),it.value!==null&&(t=ut.value(e.rows===t?t.slice():t,c,b)),t}),Pe=f(()=>re.value.length),N=f(()=>{let t=re.value;if(B.value===!0)return t;const{rowsPerPage:c}=S.value;return c!==0&&(Y.value===0&&e.rows!==t?t.length>Z.value&&(t=t.slice(0,Z.value)):t=t.slice(Y.value,Z.value)),t}),{hasSelectionMode:M,singleSelection:nt,multipleSelection:Ce,allRowsSelected:ot,someRowsSelected:ke,rowsSelectedNumber:se,isRowSelected:ie,clearSelection:rt,updateSelection:X}=Pl(e,s,N,o),{colList:st,computedCols:L,computedColsMap:Re,computedColspan:pe}=xl(e,S,M),{columnToSort:it,computedSortMethod:ut,sort:ue}=gl(e,S,st,F),{firstRowIndex:Y,lastRowIndex:Z,isFirstPage:ce,isLastPage:de,pagesNumber:J,computedRowsPerPageOptions:ct,computedRowsNumber:ee,firstPage:ve,prevPage:fe,nextPage:ge,lastPage:be}=wl(d,w,S,B,F,Pe),dt=f(()=>N.value.length===0),vt=f(()=>{const t={};return Je.forEach(c=>{t[c]=e[c]}),t.virtualScrollItemSize===void 0&&(t.virtualScrollItemSize=e.dense===!0?28:48),t});function ft(){m.value===!0&&l.value.reset()}function gt(){if(e.grid===!0)return Rt();const t=e.hideHeader!==!0?Oe:null;if(m.value===!0){const b=a["top-row"],y=a["bottom-row"],h={default:k=>Te(k.item,a.body,k.index)};if(b!==void 0){const k=u("tbody",b({cols:L.value}));h.before=t===null?()=>k:()=>[t()].concat(k)}else t!==null&&(h.before=t);return y!==void 0&&(h.after=()=>u("tbody",y({cols:L.value}))),u(rl,{ref:l,class:e.tableClass,style:e.tableStyle,...vt.value,scrollTarget:e.virtualScrollTarget,items:N.value,type:"__qtable",tableColspan:pe.value,onVirtualScroll:mt},h)}const c=[yt()];return t!==null&&c.unshift(t()),tt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},c)}function bt(t,c){if(l.value!==null){l.value.scrollTo(t,c);return}t=parseInt(t,10);const b=g.value.querySelector(`tbody tr:nth-of-type(${t+1})`);if(b!==null){const y=g.value.querySelector(".q-table__middle.scroll"),h=b.offsetTop-e.virtualScrollStickySizeStart,k=h<y.scrollTop?"decrease":"increase";y.scrollTop=h,s("virtualScroll",{index:t,from:0,to:w.value.rowsPerPage-1,direction:k})}}function mt(t){s("virtualScroll",t)}function xe(){return[u(il,{class:"q-table__linear-progress",color:e.color,dark:v.value,indeterminate:!0,trackColor:"transparent"})]}function Te(t,c,b){const y=o.value(t),h=ie(y);if(c!==void 0)return c(Be({key:y,row:t,pageIndex:b,__trClass:h?"selected":""}));const k=a["body-cell"],C=L.value.map(T=>{const le=a[`body-cell-${T.name}`],ae=le!==void 0?le:k;return ae!==void 0?ae(St({key:y,row:t,pageIndex:b,col:T})):u("td",{class:T.__tdClass(t),style:T.__tdStyle(t)},j(T,t))});if(M.value===!0){const T=a["body-selection"],le=T!==void 0?T(ht({key:y,row:t,pageIndex:b})):[u(Se,{modelValue:h,color:e.color,dark:v.value,dense:e.dense,"onUpdate:modelValue":(ae,pt)=>{X([y],[t],ae,pt)}})];C.unshift(u("td",{class:"q-table--col-auto-width"},le))}const V={key:y,class:{selected:h}};return e.onRowClick!==void 0&&(V.class["cursor-pointer"]=!0,V.onClick=T=>{s("rowClick",T,t,b)}),e.onRowDblclick!==void 0&&(V.class["cursor-pointer"]=!0,V.onDblclick=T=>{s("rowDblclick",T,t,b)}),e.onRowContextmenu!==void 0&&(V.class["cursor-pointer"]=!0,V.onContextmenu=T=>{s("rowContextmenu",T,t,b)}),u("tr",V,C)}function yt(){const t=a.body,c=a["top-row"],b=a["bottom-row"];let y=N.value.map((h,k)=>Te(h,t,k));return c!==void 0&&(y=c({cols:L.value}).concat(y)),b!==void 0&&(y=y.concat(b({cols:L.value}))),u("tbody",y)}function Be(t){return me(t),t.cols=t.cols.map(c=>Q({...c},"value",()=>j(c,t.row))),t}function St(t){return me(t),Q(t,"value",()=>j(t.col,t.row)),t}function ht(t){return me(t),t}function me(t){Object.assign(t,{cols:L.value,colsMap:Re.value,sort:ue,rowIndex:Y.value+t.pageIndex,color:e.color,dark:v.value,dense:e.dense}),M.value===!0&&Q(t,"selected",()=>ie(t.key),(c,b)=>{X([t.key],[t.row],c,b)}),Q(t,"expand",()=>x(t.key),c=>{at(t.key,c)})}function j(t,c){const b=typeof t.field=="function"?t.field(c):c[t.field];return t.format!==void 0?t.format(b,c):b}const A=f(()=>({pagination:S.value,pagesNumber:J.value,isFirstPage:ce.value,isLastPage:de.value,firstPage:ve,prevPage:fe,nextPage:ge,lastPage:be,inFullscreen:r.value,toggleFullscreen:n}));function wt(){const t=a.top,c=a["top-left"],b=a["top-right"],y=a["top-selection"],h=M.value===!0&&y!==void 0&&se.value>0,k="q-table__top relative-position row items-center";if(t!==void 0)return u("div",{class:k},[t(A.value)]);let C;if(h===!0?C=y(A.value).slice():(C=[],c!==void 0?C.push(u("div",{class:"q-table__control"},[c(A.value)])):e.title&&C.push(u("div",{class:"q-table__control"},[u("div",{class:["q-table__title",e.titleClass]},e.title)]))),b!==void 0&&(C.push(u("div",{class:"q-table__separator col"})),C.push(u("div",{class:"q-table__control"},[b(A.value)]))),C.length!==0)return u("div",{class:k},C)}const $e=f(()=>ke.value===!0?null:ot.value);function Oe(){const t=_t();return e.loading===!0&&a.loading===void 0&&t.push(u("tr",{class:"q-table__progress"},[u("th",{class:"relative-position",colspan:pe.value},xe())])),u("thead",t)}function _t(){const t=a.header,c=a["header-cell"];if(t!==void 0)return t(ye({header:!0})).slice();const b=L.value.map(y=>{const h=a[`header-cell-${y.name}`],k=h!==void 0?h:c,C=ye({col:y});return k!==void 0?k(C):u(al,{key:y.name,props:C},()=>y.label)});if(nt.value===!0&&e.grid!==!0)b.unshift(u("th",{class:"q-table--col-auto-width"}," "));else if(Ce.value===!0){const y=a["header-selection"],h=y!==void 0?y(ye({})):[u(Se,{color:e.color,modelValue:$e.value,dark:v.value,dense:e.dense,"onUpdate:modelValue":Fe})];b.unshift(u("th",{class:"q-table--col-auto-width"},h))}return[u("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},b)]}function ye(t){return Object.assign(t,{cols:L.value,sort:ue,colsMap:Re.value,color:e.color,dark:v.value,dense:e.dense}),Ce.value===!0&&Q(t,"selected",()=>$e.value,Fe),t}function Fe(t){ke.value===!0&&(t=!1),X(N.value.map(o.value),N.value,t)}const te=f(()=>{const t=[e.iconFirstPage||i.iconSet.table.firstPage,e.iconPrevPage||i.iconSet.table.prevPage,e.iconNextPage||i.iconSet.table.nextPage,e.iconLastPage||i.iconSet.table.lastPage];return i.lang.rtl===!0?t.reverse():t});function qt(){if(e.hideBottom===!0)return;if(dt.value===!0){if(e.hideNoData===!0)return;const b=e.loading===!0?e.loadingLabel||i.lang.table.loading:e.filter?e.noResultsLabel||i.lang.table.noResults:e.noDataLabel||i.lang.table.noData,y=a["no-data"],h=y!==void 0?[y({message:b,icon:i.iconSet.table.warning,filter:e.filter})]:[u(ze,{class:"q-table__bottom-nodata-icon",name:i.iconSet.table.warning}),b];return u("div",{class:ne+" q-table__bottom--nodata"},h)}const t=a.bottom;if(t!==void 0)return u("div",{class:ne},[t(A.value)]);const c=e.hideSelectedBanner!==!0&&M.value===!0&&se.value>0?[u("div",{class:"q-table__control"},[u("div",[(e.selectedRowsLabel||i.lang.table.selectedRecords)(se.value)])])]:[];if(e.hidePagination!==!0)return u("div",{class:ne+" justify-end"},Ct(c));if(c.length!==0)return u("div",{class:ne},c)}function Pt(t){F({page:1,rowsPerPage:t.value})}function Ct(t){let c;const{rowsPerPage:b}=S.value,y=e.paginationLabel||i.lang.table.pagination,h=a.pagination,k=e.rowsPerPageOptions.length>1;if(t.push(u("div",{class:"q-table__separator col"})),k===!0&&t.push(u("div",{class:"q-table__control"},[u("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||i.lang.table.recordsPerPage]),u(Jt,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:b,options:ct.value,displayValue:b===0?i.lang.table.allRows:b,dark:v.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Pt})])),h!==void 0)c=h(A.value);else if(c=[u("span",b!==0?{class:"q-table__bottom-item"}:{},[b?y(Y.value+1,Math.min(Z.value,ee.value),ee.value):y(1,Pe.value,ee.value)])],b!==0&&J.value>1){const C={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(C.size="sm"),J.value>2&&c.push(u(z,{key:"pgFirst",...C,icon:te.value[0],disable:ce.value,onClick:ve})),c.push(u(z,{key:"pgPrev",...C,icon:te.value[1],disable:ce.value,onClick:fe}),u(z,{key:"pgNext",...C,icon:te.value[2],disable:de.value,onClick:ge})),J.value>2&&c.push(u(z,{key:"pgLast",...C,icon:te.value[3],disable:de.value,onClick:be}))}return t.push(u("div",{class:"q-table__control"},c)),t}function kt(){const t=e.gridHeader===!0?[u("table",{class:"q-table"},[Oe()])]:e.loading===!0&&a.loading===void 0?xe():void 0;return u("div",{class:"q-table__middle"},t)}function Rt(){const t=a.item!==void 0?a.item:c=>{const b=c.cols.map(h=>u("div",{class:"q-table__grid-item-row"},[u("div",{class:"q-table__grid-item-title"},[h.label]),u("div",{class:"q-table__grid-item-value"},[h.value])]));if(M.value===!0){const h=a["body-selection"],k=h!==void 0?h(c):[u(Se,{modelValue:c.selected,color:e.color,dark:v.value,dense:e.dense,"onUpdate:modelValue":(C,V)=>{X([c.key],[c.row],C,V)}})];b.unshift(u("div",{class:"q-table__grid-item-row"},k),u(Nt,{dark:v.value}))}const y={class:["q-table__grid-item-card"+_.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(y.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(y.onClick=h=>{s("RowClick",h,c.row,c.pageIndex)}),e.onRowDblclick!==void 0&&(y.onDblclick=h=>{s("RowDblclick",h,c.row,c.pageIndex)})),u("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(c.selected===!0?" q-table__grid-item--selected":"")},[u("div",y,b)])};return u("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},N.value.map((c,b)=>t(Be({key:o.value(c),row:c,pageIndex:b}))))}return Object.assign(d.proxy,{requestServerInteraction:$,setPagination:F,firstPage:ve,prevPage:fe,nextPage:ge,lastPage:be,isRowSelected:ie,clearSelection:rt,isRowExpanded:x,setExpanded:W,sort:ue,resetVirtualScroll:ft,scrollTo:bt,getCellValue:j}),Vt(d.proxy,{filteredSortedRows:()=>re.value,computedRows:()=>N.value,computedRowsNumber:()=>ee.value}),()=>{const t=[wt()],c={ref:g,class:P.value};return e.grid===!0?t.push(kt()):Object.assign(c,{class:[c.class,e.cardClass],style:e.cardStyle}),t.push(gt(),qt()),e.loading===!0&&a.loading!==void 0&&t.push(a.loading()),u("div",c,t)}}});function Bl(){return Mt(jt)}const $l=At({name:"TableAsiati",emits:["do-delete","do-edit"],props:{rows:{type:Array,required:!0,default:()=>[]},columns:{type:Array,required:!0,default:()=>[]},totalItems:Number,permissionEdit:{type:String,default:()=>""},permissionDelete:{type:String,default:()=>""}},setup(e,{emit:a}){const s=Bl(),d=Qt(),i=E({admin:"Administrador",ceo:"CEO"}),v=E({page:1,rowsPerPage:12,rowsNumber:1}),r=It();D(()=>e.totalItems,()=>{v.value.rowsNumber=e.totalItems});const n=l=>{s.dialog({title:"Eliminar",message:"\xBFDeseas eliminar este elemento?",cancel:!0,persistent:!0}).onOk(()=>{a("do-delete",l)}).onCancel(()=>{})},o=l=>{const{pagination:m}=l,_=m.page||1,q=m.rowsPerPage||12,P=d.query.search||"";r.push({query:{page:_,perPage:q,search:P}})},g=l=>{a("do-edit",l)};return qe(()=>{d.query.page&&(v.value.page=Number(d.query.page)),d.query.perPage&&(v.value.rowsPerPage=Number(d.query.perPage)),e.totalItems&&(v.value.rowsNumber=e.totalItems)}),{roles:i,doEdit:g,doDolete:n,onRequest:o,pagination:v}}}),Ol={class:"full-width q-mt-lg"},Fl={class:"full-width text-center q-pt-md"};function Dl(e,a,s,d,i,v){return he(),Ht("section",Ol,[O(Tl,{onRequest:e.onRequest,"rows-per-page-options":[1,5,12,20,50],pagination:e.pagination,"onUpdate:pagination":a[0]||(a[0]=r=>e.pagination=r),"row-key":"_id",class:"shadow-0 round-10",columns:e.rows,rows:e.columns},{"body-cell-userType":p(r=>[O(Qe,null,{default:p(()=>[O(el,{class:zt([{"admin-chip":r.row.role==="admin","ceo-chip":r.row.role==="ceo"},"text-white"]),color:"secondary",size:"8pt"},{default:p(()=>[Gt("p",Fl,Kt(e.roles[r.row.role]),1)]),_:2},1032,["class"])]),_:2},1024)]),"body-cell-option":p(r=>[O(Qe,null,{default:p(()=>[O(z,{size:"8pt",flat:"",round:"",icon:"img:/images/options.svg"},{default:p(()=>[O(tl,{class:"bg-primary"},{default:p(()=>[we(" Opciones ")]),_:1}),O(ll,{class:"round-10"},{default:p(()=>[O(et,{dense:""},{default:p(()=>[e.$hasPermission(e.permissionEdit)?(he(),Ve(Ae,{key:0,clickable:"",onClick:n=>e.doEdit(r.row._id)},{default:p(()=>[O(Me,null,{default:p(()=>[O(je,{class:"text-primary text-weight-semi-bold"},{default:p(()=>[we(" Editar ")]),_:1})]),_:1})]),_:2},1032,["onClick"])):Ne("",!0),e.$hasPermission(e.permissionDelete)?(he(),Ve(Ae,{key:1,clickable:"",onClick:n=>e.doDolete(r.row._id)},{default:p(()=>[O(Me,null,{default:p(()=>[O(je,{class:"text-primary text-weight-semi-bold"},{default:p(()=>[we(" Eliminar ")]),_:1})]),_:1})]),_:2},1032,["onClick"])):Ne("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["onRequest","pagination","columns","rows"])])}var jl=Ut($l,[["render",Dl]]);export{jl as T,Ml as u};
